- name: Run homework checker
  id: run-homework-checker
  run: |
    echo "Running homework checker..."
    python homework_checker.py > result.log

    # Проверка завершения работы скрипта
    if [ $? -ne 0 ]; then
      echo "Homework checker failed!" >> result.log
      exit 1
    fi

    # Проверяем, что файл result.log не пустой
    if [ ! -s result.log ]; then
      echo "Error: result.log is empty after running homework checker" >> result.log
      exit 1
    fi

- name: Debug result.log content
  run: |
    # Проверяем, существует ли файл result.log
    if [ ! -f result.log ]; then
      echo "Error: result.log does not exist"
      exit 1
    fi

    # Выводим содержимое result.log для отладки
    echo "Contents of result.log:"
    cat result.log || echo "Failed to read result.log"

- name: Check if result.log is empty
  run: |
    # Проверяем, что файл result.log не пустой
    if [ ! -s result.log ]; then
      echo "Error: result.log is empty" >> result.log
      exit 1
    fi

    echo "result.log is not empty, proceeding..."
